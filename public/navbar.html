<nav class="navbar">
  <div class="logo">
    <a href="core.html">
      <img src="img/core.png" alt="core logo">
    </a>
    <div class="nav-text-container">
      <a class="nav-text" href="/user/">user</a>@<a class="nav-text" href="core.html">CORE</a>/<span id="current-path"></span>
</div>
</div>
  </div>

  <ul class="nav-links">
    
    <li>
      <a href="login.html" class="navbar-button">
        <img src="img/glyphs/person.svg" alt="login icon" class="nb-icon">      </a>
    </li>
    <li>
      <a href="register.html" class="navbar-button">
        <img src="img/glyphs/public.svg" alt="register icon" class="nb-icon">      </a>
    </li>
    <!-- Add more navigation links for the first part as needed -->
  </ul>
</nav>

<nav class="second-navbar">
  <ul class="second-nav-links">
    <li>
      <a href="communities.html" class="navbar-button">
          <img src="./img/glyphs/forum.svg" alt="forum icon" class="nb-icon"> 
          Community
      </a>
  </li>
    <li>
      <a href="jobs.html" class="navbar-button">
          <img src="./img/glyphs/job.svg" alt="job icon" class="nb-icon"> 
          Openings
      </a>
  </li>
    <li>
      <a href="learning.html" class="navbar-button">
          <img src="./img/glyphs/code.svg" alt="code icon" class="nb-icon"> 
          Learning
      </a>
  </li>
    <li>
      <a href="practice.html" class="navbar-button">
      <img src="./img/glyphs/learn.svg" alt="code icon" class="nb-icon">
          Practice
  </a>
</li>
    <li><a href="support.html" class="navbar-button">
      <img src="./img/glyphs/support.svg" alt="support icon" class="nb-icon">
      Support</a></li>
    <li>
      <a href="about.html" class="navbar-button">
        <img src="./img/glyphs/info.svg" alt="info icon" class="nb-icon">
        About</a></li>
    <!-- Add more navigation links for the second part as needed -->
  </ul>
</nav>

<script>
function updateCurrentPath() {
  const pathSpan = document.getElementById('current-path');
  if (pathSpan) {
    // Clear any existing content in pathSpan
    pathSpan.innerHTML = '';

    // Get the current path from the window location
    const path = window.location.pathname.split('/').pop().replace('.html', '');

    // Create the 'user' anchor element
    const userAnchor = document.createElement('a');
    userAnchor.textContent = 'user';

    // Create the 'usernameDisplay' anchor element
    const usernameDisplay = document.createElement('a');
    usernameDisplay.id = 'usernameDisplay';
    usernameDisplay.textContent = path; // Dynamic text based on the path
    // Optionally set the href if needed
    // usernameDisplay.href = `/${path}`;

    switch(path) {
      case 'login':
        // Append the 'user' anchor to pathSpan only in the 'login' case
        pathSpan.appendChild(userAnchor);

        // Add a text node for the slash '/'
        pathSpan.appendChild(document.createTextNode('/'));

        // Update usernameDisplay text content to something appropriate, like 'Login'
        usernameDisplay.textContent = '';
        // Append the usernameDisplay anchor to pathSpan
        pathSpan.appendChild(usernameDisplay);
        break;
      case 'communities':
        pathSpan.textContent = 'community';
        break;
      case 'jobs':
        pathSpan.textContent = 'openings';
        break;
      case 'learning':
        pathSpan.textContent = 'learning';
        break;
      case 'practice':
        pathSpan.textContent = 'practice';
        break;
      case 'register':
      pathSpan.appendChild(userAnchor);

// Add a text node for the slash '/'
pathSpan.appendChild(document.createTextNode('/'));

// Update usernameDisplay text content to something appropriate, like 'Login'
usernameDisplay.textContent = '';
// Append the usernameDisplay anchor to pathSpan
pathSpan.appendChild(usernameDisplay);        break;
      
      // Add more cases as needed
      default:
        pathSpan.textContent = ''; // Default or home page
    }
  }
}
function updateNavbarWithUsername() {
  fetch('/api/session')
    .then(response => response.json())
    .then(data => {
      if (data.isLoggedIn) {
        // If the user is logged in, update the navbar to display the username
        const usernameDisplay = document.getElementById('username-display');
        if (usernameDisplay) {
          usernameDisplay.textContent = data.username;
        }
      }
    })
    .catch(error => console.error('Error fetching session data:', error));
}

// Call the function to update the path and username when the window loads
window.onload = function() {
  updateCurrentPath();
  updateNavbarWithUsername();
};


</script>
